@using System.Web.Mvc.Html
@using MapBul.DBContext
@model MapBul.Web.Models.NewMarkerModel

<div class="ibox">
    <div class="ibox-title">
        <h3>Новый маркер</h3>
    </div>
    <div class="ibox-content">
        <form action="#" method="POST" id="NewMarkerForm">
            <div class="row">
                <div class="col-md-6">
                    <div class="form-group">
                        @Html.TextBoxFor(m => m.Name, new Dictionary<string, object> {{"placeholder", "Название"}, {"class", "form-control"}, {"required", ""}})
                    </div>
                    <div class="form-group">
                        @Html.TextBoxFor(m => m.Introduction, new Dictionary<string, object> {{"placeholder", "Вступление"}, {"class", "form-control"}, {"required", ""}})
                    </div>
                    <div class="form-group">
                        @Html.TextAreaFor(m => m.Description, new Dictionary<string, object> {{"placeholder", "Описание"}, {"class", "form-control"}, {"required", ""}})
                    </div>
                    <div class="form-group">
                        @Html.TextBoxFor(m => m.Site, new Dictionary<string, object> {{"placeholder", "Сайт"}, {"class", "form-control"}})
                    </div>
                    <div class="form-group">
                        @Html.TextBoxFor(m => m.Email, new Dictionary<string, object> {{"placeholder", "Email"}, {"class", "form-control"}})
                    </div>
                    <div class="form-group">
                        @Html.TextBoxFor(m => m.EntryTicket, new Dictionary<string, object> {{"placeholder", "Входной билет"}, {"class", "form-control"}, {"required", ""}})
                    </div>
                    <div class="form-group">
                        @Html.TextBoxFor(m => m.Phones, new Dictionary<string, object> { { "placeholder", "Телефон" }, { "class", "form-control" }, { "required", "" }, {"data-mask","(999)999-99-99"} })
                    </div>
                    <div class="form-group">
                        <label class="control-label">Базовая категория</label>
                        @Html.DropDownListFor(m => m.BaseCategoryId, ((List<category>) ViewBag.Categories).Select(c => new SelectListItem {Text = c.Name, Value = c.Id.ToString()}), new Dictionary<string, object> {{"class", "form-control chosenselect"}, {"required", ""}})
                    </div>
                    <div class="form-group">
                        <label class="control-label">Тэги</label>
                        @Html.ListBoxFor(m => m.SubCategories, ((List<category>) ViewBag.Categories).Select(c => new SelectListItem {Text = c.Name, Value = c.Id.ToString()}), new Dictionary<string, object> {{"class", "form-control chosenselect"}, {"multiple", ""}, {"data-placeholder", "Выберите тэги"}, {"required", ""}})
                    </div>
                </div>
                <div class="col-md-6">
                    <div class="form-group">
                        @Html.DropDownList("CityId", ((List<city>)ViewBag.Cities).Select(c => new SelectListItem { Text = c.Name + ", " + c.region.Name + ", " + c.region.country.Name, Value = c.Id.ToString() }), new Dictionary<string, object> { { "id", "NewMarkerCitySelect" }, { "class", "form-control chosenselect" }, { "required", "" } })
                    </div>
                    <div class="form-group">
                        @Html.TextBoxFor(m => m.Street, new Dictionary<string, object> {{"id", "NewMarkerStreetInput"}, {"placeholder", "Улица"}, {"class", "form-control"}, {"required", ""}})
                    </div>
                    <div class="form-group">
                        @Html.TextBoxFor(m => m.House, new Dictionary<string, object> {{"id", "NewMarkerHouseInput"}, {"placeholder", "Дом"}, {"class", "form-control"}, {"required", ""}})
                    </div>
                    <div class="form-group">
                        @Html.TextBoxFor(m => m.Buliding, new Dictionary<string, object> {{"id", "NewMarkerBuildingInput"}, {"placeholder", "Строение"}, {"class", "form-control"}})
                    </div>
                    <div class="form-group">
                        @Html.TextBoxFor(m => m.Floor, new Dictionary<string, object> {{"placeholder", "Этаж"}, {"class", "form-control"}})
                    </div>
                    <div class="form-group">
                        <label class="control-label">Скидка</label>
                        @Html.DropDownListFor(m => m.DiscountId, ((List<discount>)ViewBag.Discounts).Select(c => new SelectListItem { Text = c.Value.ToString() + "%", Value = c.Id.ToString() }), new Dictionary<string, object> { { "class", "form-control chosenselect" }, { "required", "" } })
                    </div>
                    <div class="form-group">
                        <label class="control-label">Статус</label>
                        @Html.DropDownListFor(m => m.StatusId, ((List<status>) ViewBag.Statuses).Select(c => new SelectListItem {Text = c.Description, Value = c.Id.ToString()}), new Dictionary<string, object> {{"class", "form-control chosenselect"}, {"required", ""}})
                    </div>
                    <div class="form-group">
                        <label class="control-label">Фотография</label>
                        <input type="file" id="NewMarkerPhotoInput" class="form-control fileinput" accept="image/jpeg, image/png" />
                    </div>
                </div>
            </div>
            <div class="row">
                <div id="GMap" style="width: 100%; height: 300px;">
                </div>
            </div>
            <div class="row" style="padding-top: 30px;">
                <div class="panel">
                    <div class="panel-heading border-bottom">
                        <h3>Время работы</h3>
                    </div>
                    <div class="panel-body">
                        <table class="table">
                            <thead>
                            <tr>
                                <th></th>
                                @foreach (var weekDay in ((List<weekday>) ViewBag.WeekDays))
                                {
                                    <th>@weekDay.Description</th>
                                }
                            </tr>
                            </thead>
                            <tbody>
                            <tr >
                                <td>Открытие</td>
                                @foreach (var weekDay in ((List<weekday>) ViewBag.WeekDays))
                                {
                                    <td>
                                        <div class="input-group clockpicker" data-autoclose="true">
                                            <input data-WeekDayId="@weekDay.Id" class="OpenTime form-control" type="text">
                                        </div>
                                    </td>
                                }
                            </tr>
                            <tr >
                                <td>Закрытие</td>
                                @foreach (var weekDay in ((List<weekday>)ViewBag.WeekDays))
                                {
                                    <td>
                                        <div class="input-group clockpicker" data-autoclose="true">
                                            <input data-WeekDayId="@weekDay.Id" class="CloseTime form-control" type="text">
                                        </div>
                                    </td>
                                }
                            </tr>
                            </tbody>
                        </table>
                    </div>
                </div>
            </div>
            <div class="form-group text-right">
                <input type="button" id="NewMarkerFormSubmit" value="Сохранить" class="btn btn-primary"/>
            </div>
        </form>
    </div>
</div>


<script type="text/javascript">
    var marker;
    var map;
    OnNewMarkerDocumentReady();
</script>
